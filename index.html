<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pequenos Passos</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Caveat:wght@700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div id="global-error-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); color: white; z-index: 9999; padding: 20px; overflow: auto;">
        <h2 style="color: #ff4444;">Application Error</h2>
        <pre id="global-error-message" style="white-space: pre-wrap; font-family: monospace;"></pre>
        <button onclick="document.getElementById('global-error-overlay').style.display='none'" style="padding: 10px 20px; margin-top: 20px; background: #444; border: none; color: white; cursor: pointer;">Close</button>
    </div>
    <script>
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            var overlay = document.getElementById('global-error-overlay');
            var message = document.getElementById('global-error-message');
            if (overlay && message) {
                message.textContent = "Error: " + msg + "\nURL: " + url + "\nLine: " + lineNo + "\nColumn: " + columnNo + "\nStack: " + (error ? error.stack : 'N/A');
                overlay.style.display = 'block';
            }
            return false;
        };
        window.onunhandledrejection = function(event) {
             var overlay = document.getElementById('global-error-overlay');
            var message = document.getElementById('global-error-message');
             if (overlay && message) {
                message.textContent = "Unhandled Rejection: " + event.reason;
                overlay.style.display = 'block';
            }
        };
    </script>

    <nav id="sidebar-menu" class="sidebar">
        <button id="sidebar-toggle" class="sidebar-toggle-button" aria-label="Alternar menu lateral" aria-expanded="false">
            <i class="fas fa-bars"></i>
        </button>
        
        <ul class="sidebar-links">
             <li><a href="#inicio" title="Início" class="sidebar-link" data-page="inicio"><i class="fas fa-home fa-fw"></i><span class="sidebar-text">Início</span></a></li>

            <li>
                <details id="sidebar-details-fisica">
                    <summary class="sidebar-link" data-page-parent="fisica"><i class="fas fa-heartbeat fa-fw"></i><span class="sidebar-text">Física</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                    <ul>
                        <li><a href="#fisica" class="sidebar-link sub-link" data-page="fisica">Visão Geral</a></li>
                        <li><a href="#leitura-guia-fisica" class="sidebar-link sub-link" data-page="leitura-guia-fisica">Guia de Leitura</a></li>
                        <li><a href="#alongamento" class="sidebar-link sub-link" data-page="alongamento">Guia de Alongamento</a></li>
                        <li><a href="#alimentacao-forte" class="sidebar-link sub-link" data-page="alimentacao-forte">Guia de Alimentação</a></li>
                    </ul>
                </details>
            </li>
            
            <li>
                <details id="sidebar-details-mental">
                    <summary class="sidebar-link" data-page-parent="mental"><i class="fas fa-brain fa-fw"></i><span class="sidebar-text">Mental</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                    <ul>
                        <li><a href="#mental" class="sidebar-link sub-link" data-page="mental">Visão Geral</a></li>
                        <li><a href="#leitura-guia-mental" class="sidebar-link sub-link" data-page="leitura-guia-mental">Guia de Leitura</a></li>
                    </ul>
                </details>
            </li>

            <li>
                 <details id="sidebar-details-financeira">
                    <summary class="sidebar-link" data-page-parent="financeira"><i class="fas fa-dollar-sign fa-fw"></i><span class="sidebar-text">Financeira</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                    <ul>
                        <li><a href="#financeira" class="sidebar-link sub-link" data-page="financeira">Visão Geral</a></li>
                        <li><a href="#leitura-guia-financeira" class="sidebar-link sub-link" data-page="leitura-guia-financeira">Guia de Leitura</a></li>
                    </ul>
                </details>
            </li>

            <li>
                 <details id="sidebar-details-familiar">
                    <summary class="sidebar-link" data-page-parent="familiar"><i class="fas fa-users fa-fw"></i><span class="sidebar-text">Familiar</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                    <ul>
                        <li><a href="#familiar" class="sidebar-link sub-link" data-page="familiar">Visão Geral</a></li>
                        <li><a href="#leitura-guia-familiar" class="sidebar-link sub-link" data-page="leitura-guia-familiar">Guia de Leitura</a></li>
                    </ul>
                </details>
            </li>
            
            <li><a href="#profissional" title="Saúde Profissional" class="sidebar-link" data-page="profissional"><i class="fas fa-briefcase fa-fw"></i><span class="sidebar-text">Profissional</span></a></li>
            <li><a href="#social" title="Saúde Social" class="sidebar-link" data-page="social"><i class="fas fa-comments fa-fw"></i><span class="sidebar-text">Social</span></a></li>

            <li>
                 <details id="sidebar-details-espiritual">
                    <summary class="sidebar-link" data-page-parent="espiritual"><i class="fas fa-om fa-fw"></i><span class="sidebar-text">Espiritual</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                    <ul>
                        <li><a href="#espiritual" class="sidebar-link sub-link" data-page="espiritual">Visão Geral</a></li>
                        <li><a href="#leitura-guia-espiritual" class="sidebar-link sub-link" data-page="leitura-guia-espiritual">Guia de Leitura</a></li>
                    </ul>
                </details>
            </li>
            
            <li><a href="#preventiva" title="Saúde Preventiva" class="sidebar-link" data-page="preventiva"><i class="fas fa-shield-alt fa-fw"></i><span class="sidebar-text">Preventiva</span></a></li>
            <li><a href="#" id="open-contract-sidebar" title="Contrato de Compromisso" class="sidebar-link"><i class="fas fa-file-signature fa-fw"></i><span class="sidebar-text">Contrato</span></a></li>
            <li><a href="#planejamento-diario" title="Planejamento Diário" class="sidebar-link" data-page="planejamento-diario"><i class="fas fa-calendar-day fa-fw"></i><span class="sidebar-text">Planejamento</span></a></li>
            <li><a href="#tarefas" title="Lista de Tarefas" class="sidebar-link" data-page="tarefas"><i class="fas fa-check-double fa-fw"></i><span class="sidebar-text">Tarefas</span></a></li>
        </ul>
    </nav>

    <main id="main-content">
        <nav id="breadcrumb-nav" aria-label="breadcrumb"></nav>
        <div id="page-content-wrapper">
             <!-- Page content will be loaded here dynamically -->
        </div>
    </main>
    
    <!-- Global Floating Action Buttons and Audio -->
    <div class="fab-container">
        <button id="tts-stop-btn" class="fab-button tts-fab-stop" aria-label="Parar leitura" style="display: none;"><i class="fas fa-stop"></i></button>
        <button id="tts-play-btn" class="fab-button tts-fab-play" aria-label="Ler página em voz alta"><i class="fas fa-volume-up"></i></button>
        <button id="rain-sound-toggle" class="fab-button rain-sound-button" aria-label="Tocar som de chuva">
            <i class="fas fa-cloud-rain"></i>
        </button>
        <button id="theme-toggle" class="fab-button theme-toggle-button" aria-label="Alternar para modo escuro">
            <i id="theme-toggle-icon" class="fas fa-moon"></i>
        </button>
    </div>
    <audio id="rain-sound" src="https://www.soundjay.com/nature/rain-07.mp3" loop></audio>

    <!-- Global Modals -->
    <div id="contract-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="contract-modal-title-static">
        <div class="modal-content large-modal-content">
            <header class="modal-header">
                <h2 id="contract-modal-title-static">Contrato de Compromisso Pessoal</h2>
                <button id="contract-modal-close-btn" class="modal-close-button" aria-label="Fechar Contrato"><i class="fas fa-times"></i></button>
            </header>
            <div id="contract-modal-body" class="modal-body">
                <form id="contract-form">
                    <p>Eu, <input type="text" id="contract-name" placeholder="Seu Nome Completo" class="inline-input" required>, portador(a) do CPF <input type="text" id="contract-cpf" placeholder="000.000.000-00" class="inline-input">, nascido(a) em <input type="date" id="contract-birthdate" class="inline-input">, residente em <input type="text" id="contract-address" placeholder="Seu Endereço" class="inline-input">, firmo este contrato de compromisso pessoal e intransferível comigo mesmo(a).</p>
                    
                    <div class="form-group">
                        <label for="contract-commitment"><strong>Cláusula 1: O Compromisso</strong></label>
                        <p>Comprometo-me a dedicar tempo, energia e esforço para melhorar minha saúde e bem-estar em todas as áreas da minha vida, reconhecendo que pequenas ações consistentes levam a grandes transformações. Este compromisso é um ato de autocuidado e amor-próprio.</p>
                        <div class="input-wrapper textarea-wrapper">
                            <textarea id="contract-commitment" rows="4" placeholder="Detalhe seu compromisso pessoal aqui. Ex: Comprometo-me a ser mais paciente comigo mesmo(a) e a celebrar cada pequena vitória no meu processo de desenvolvimento..."></textarea>
                            <button type="button" id="contract-commitment-ai-btn" class="ai-suggestion-btn" title="Sugerir com IA"><i class="fas fa-wand-magic-sparkles"></i><i class="fas fa-spinner fa-spin"></i></button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="contract-period"><strong>Cláusula 2: O Prazo</strong></label>
                        <p>Este contrato é válido pelo período de <input type="text" id="contract-period" placeholder="Ex: 90 dias, 6 meses, 1 ano" class="inline-input">, a contar da data de assinatura, podendo ser renovado e reavaliado conforme meu progresso e novas metas.</p>
                    </div>

                    <div class="form-group">
                        <label for="contract-goals"><strong>Cláusula 3: As Metas</strong></label>
                        <p>Durante a vigência deste contrato, focarei em alcançar as seguintes metas principais (seja específico):</p>
                         <div class="input-wrapper textarea-wrapper">
                            <textarea id="contract-goals" rows="6" placeholder="Ex: 1. Saúde Física: Perder 5kg e correr 5km. 2. Saúde Financeira: Economizar R$1000 para a reserva de emergência. 3. Saúde Mental: Praticar meditação 3x por semana..."></textarea>
                            <button type="button" id="contract-goals-ai-btn" class="ai-suggestion-btn" title="Sugerir com IA"><i class="fas fa-wand-magic-sparkles"></i><i class="fas fa-spinner fa-spin"></i></button>
                        </div>
                    </div>

                     <div class="form-group signature-group">
                        <label for="contract-date"><strong>Assinatura e Data</strong></label>
                        <p>Assino o presente contrato em sinal de meu comprometimento e determinação.</p>
                        <div class="signature-line-container">
                             <input type="text" id="contract-signature" class="signature-input" placeholder="Digite seu nome para assinar" required>
                             <input type="date" id="contract-date" required>
                        </div>
                    </div>
                </form>
            </div>
            <footer id="contract-modal-actions" class="modal-footer">
                 <button type="button" id="contract-modal-print-btn" class="standard-button-secondary"><i class="fas fa-print"></i> Imprimir</button>
                 <button type="button" id="contract-modal-cancel-btn" class="standard-button-secondary">Fechar</button>
                 <button type="button" id="contract-modal-save-btn" class="standard-button"><i class="fas fa-save"></i> Salvar Contrato</button>
            </footer>
        </div>
    </div>

    <!-- TTS Settings Modal -->
    <div id="tts-settings-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="tts-settings-title">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="tts-settings-title">Configurações de Leitura</h2>
                <button id="tts-settings-close-btn" class="modal-close-button" aria-label="Fechar Configurações"><i class="fas fa-times"></i></button>
            </header>
            <div class="modal-body">
                <div class="form-group">
                    <label for="tts-voice-select">Voz:</label>
                    <select id="tts-voice-select">
                        <option value="">Carregando vozes...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tts-rate-slider">Velocidade: <span id="tts-rate-value">1.2</span></label>
                    <input type="range" id="tts-rate-slider" min="0.5" max="2" step="0.1" value="1.2">
                </div>
                <div class="form-group">
                    <label for="tts-pitch-slider">Tom: <span id="tts-pitch-value">1.0</span></label>
                    <input type="range" id="tts-pitch-slider" min="0" max="2" step="0.1" value="1.0">
                </div>
            </div>
            <footer class="modal-footer">
                 <button id="tts-settings-test-btn" class="standard-button-secondary">Testar Voz</button>
                 <button id="tts-start-reading-btn" class="standard-button">Iniciar Leitura</button>
            </footer>
        </div>
    </div>

    <!-- Gerenciar Tarefas Modal Structure -->
    <div id="task-modal-gerenciar-tarefas" class="modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title-tarefas" style="display: none;">
        <div class="modal-content task-modal-content">
            <header class="modal-header">
                <h2 id="modal-title-tarefas">Adicionar Tarefa</h2>
                <button id="task-modal-close-btn" class="close-modal modal-close-button" aria-label="Fechar modal de tarefa"><i class="fas fa-times"></i></button>
            </header>
            <form id="task-form-gerenciar-tarefas">
                 <div class="modal-body">
                    <div class="form-group">
                        <label for="modal-task-title">Título:</label>
                        <div class="input-wrapper">
                            <input type="text" id="modal-task-title" name="title" required>
                            <button type="button" id="modal-task-title-ai-btn" class="ai-suggestion-btn" title="Sugerir com IA"><i class="fas fa-wand-magic-sparkles"></i><i class="fas fa-spinner fa-spin"></i></button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="modal-task-description">Descrição:</label>
                        <div class="input-wrapper textarea-wrapper">
                            <textarea id="modal-task-description" name="description" rows="5"></textarea>
                            <button type="button" id="modal-task-description-ai-btn" class="ai-suggestion-btn" title="Sugerir com IA"><i class="fas fa-wand-magic-sparkles"></i><i class="fas fa-spinner fa-spin"></i></button>
                        </div>
                    </div>
                     <div class="form-group" style="display: flex; gap: 15px;">
                        <div style="flex: 1;">
                            <label for="modal-task-due-date">Data de Vencimento:</label>
                            <input type="date" id="modal-task-due-date" name="dueDate">
                        </div>
                        <div style="flex: 1;">
                            <label for="modal-task-time">Horário (Opcional):</label>
                            <input type="time" id="modal-task-time" name="time">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="modal-task-priority">Prioridade:</label>
                        <select id="modal-task-priority" name="priority">
                            <option value="low">Baixa</option>
                            <option value="medium" selected>Média</option>
                            <option value="high">Alta</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="modal-task-category">Categoria:</label>
                        <select id="modal-task-category" name="category">
                            <option value="">Nenhuma</option>
                        </select>
                    </div>
                </div>
                <footer class="modal-footer modal-actions">
                    <button type="submit" class="btn btn-primary standard-button">Salvar Tarefa</button>
                    <button type="button" class="btn btn-outline standard-button-secondary" id="cancel-task-btn-gerenciar-tarefas">Cancelar</button>
                </footer>
            </form>
        </div>
    </div>
    
    <!-- Add/Edit Asset Modal -->
    <div id="asset-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="asset-modal-title">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="asset-modal-title">Editar Item</h2>
                <button id="asset-modal-close-btn" class="modal-close-button" aria-label="Fechar"><i class="fas fa-times"></i></button>
            </header>
            <div class="modal-body">
                <form id="asset-edit-form">
                    <div class="form-group">
                        <label for="asset-name-edit-input">Nome do Item:</label>
                        <input type="text" id="asset-name-edit-input" required>
                    </div>
                    <div class="form-group">
                        <label for="asset-purchase-date-edit-input">Data da Compra:</label>
                        <input type="date" id="asset-purchase-date-edit-input" required>
                    </div>
                </form>
            </div>
            <footer class="modal-footer">
                <button id="asset-modal-cancel-btn" type="button" class="standard-button-secondary">Cancelar</button>
                <button id="save-asset-edit-btn" type="submit" form="asset-edit-form" class="standard-button">Salvar Alterações</button>
            </footer>
        </div>
    </div>


    <!-- Image Viewer Modal -->
    <div id="image-viewer-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-label="Visualizador de Imagem">
        <div class="image-viewer-content">
            <button id="image-viewer-close-btn" class="modal-close-button" aria-label="Fechar Imagem"><i class="fas fa-times"></i></button>
            <img id="image-viewer-img" src="" alt="Imagem ampliada">
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toast-notification-container" aria-live="assertive" aria-atomic="true"></div>

    <script type="module" src="src/index.tsx"></script>
</body>
</html>