<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pequenos Passos</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Caveat:wght@700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div id="global-error-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); color: white; z-index: 9999; padding: 20px; overflow: auto;">
        <h2 style="color: #ff4444;">Application Error</h2>
        <pre id="global-error-message" style="white-space: pre-wrap; font-family: monospace;"></pre>
        <button onclick="document.getElementById('global-error-overlay').style.display='none'" style="padding: 10px 20px; margin-top: 20px; background: #444; border: none; color: white; cursor: pointer;">Close</button>
    </div>
    <script>
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            var overlay = document.getElementById('global-error-overlay');
            var message = document.getElementById('global-error-message');
            if (overlay && message) {
                message.textContent = "Error: " + msg + "\nURL: " + url + "\nLine: " + lineNo + "\nColumn: " + columnNo + "\nStack: " + (error ? error.stack : 'N/A');
                overlay.style.display = 'block';
            }
            return false;
        };
        window.onunhandledrejection = function(event) {
             var overlay = document.getElementById('global-error-overlay');
            var message = document.getElementById('global-error-message');
             if (overlay && message) {
                message.textContent = "Unhandled Rejection: " + event.reason;
                overlay.style.display = 'block';
            }
        };
    </script>

    <nav id="sidebar-menu" class="sidebar">
        <button id="sidebar-toggle" class="sidebar-toggle-button" aria-label="Alternar menu lateral" aria-expanded="false">
            <i class="fas fa-bars"></i>
        </button>
        
        <ul class="sidebar-links">
             <li><a href="#inicio" title="Início" class="sidebar-link" data-page="inicio"><i class="fas fa-home fa-fw"></i><span class="sidebar-text">Início</span></a></li>

            <li>
                <details id="sidebar-details-fisica">
                    <summary class="sidebar-link" data-page-parent="fisica"><i class="fas fa-heartbeat fa-fw"></i><span class="sidebar-text">Física</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                    <ul>
                        <li><a href="#fisica" class="sidebar-link sub-link" data-page="fisica">Visão Geral</a></li>
                        <li><a href="#leitura-guia-fisica" class="sidebar-link sub-link" data-page="leitura-guia-fisica">Guia de Leitura</a></li>
                        <li><a href="#alongamento" class="sidebar-link sub-link" data-page="alongamento">Guia de Alongamento</a></li>
                        <li><a href="#alimentacao-forte" class="sidebar-link sub-link" data-page="alimentacao-forte">Guia de Alimentação</a></li>
                    </ul>
                </details>
            </li>
            
            <li>
                <details id="sidebar-details-mental">
                    <summary class="sidebar-link" data-page-parent="mental"><i class="fas fa-brain fa-fw"></i><span class="sidebar-text">Mental</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                    <ul>
                        <li><a href="#mental" class="sidebar-link sub-link" data-page="mental">Visão Geral</a></li>
                        <li><a href="#leitura-guia-mental" class="sidebar-link sub-link" data-page="leitura-guia-mental">Guia de Leitura</a></li>
                    </ul>
                </details>
            </li>

            <li>
                 <details id="sidebar-details-financeira">
                    <summary class="sidebar-link" data-page-parent="financeira"><i class="fas fa-dollar-sign fa-fw"></i><span class="sidebar-text">Financeira</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                    <ul>
                        <li><a href="#financeira" class="sidebar-link sub-link" data-page="financeira">Visão Geral</a></li>
                        <li><a href="#leitura-guia-financeira" class="sidebar-link sub-link" data-page="leitura-guia-financeira">Guia de Leitura</a></li>
                    </ul>
                </details>
            </li>

            <li>
                 <details id="sidebar-details-familiar">
                    <summary class="sidebar-link" data-page-parent="familiar"><i class="fas fa-users fa-fw"></i><span class="sidebar-text">Familiar</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                    <ul>
                        <li><a href="#familiar" class="sidebar-link sub-link" data-page="familiar">Visão Geral</a></li>
                        <li><a href="#leitura-guia-familiar" class="sidebar-link sub-link" data-page="leitura-guia-familiar">Guia de Leitura</a></li>
                    </ul>
                </details>
            </li>
            
            <li><a href="#profissional" title="Saúde Profissional" class="sidebar-link" data-page="profissional"><i class="fas fa-briefcase fa-fw"></i><span class="sidebar-text">Profissional</span></a></li>
            <li><a href="#social" title="Saúde Social" class="sidebar-link" data-page="social"><i class="fas fa-comments fa-fw"></i><span class="sidebar-text">Social</span></a></li>

            <li>
                 <details id="sidebar-details-espiritual">
                    <summary class="sidebar-link" data-page-parent="espiritual"><i class="fas fa-om fa-fw"></i><span class="sidebar-text">Espiritual</span><i class="fas fa-chevron-right sidebar-chevron"></i></summary>
                    <ul>
                        <li><a href="#espiritual" class="sidebar-link sub-link" data-page="espiritual">Visão Geral</a></li>
                        <li><a href="#leitura-guia-espiritual" class="sidebar-link sub-link" data-page="leitura-guia-espiritual">Guia de Leitura</a></li>
                    </ul>
                </details>
            </li>

            <li><a href="#preventiva" title="Saúde Preventiva" class="sidebar-link" data-page="preventiva"><i class="fas fa-user-shield fa-fw"></i><span class="sidebar-text">Preventiva</span></a></li>
            <li><a href="#planejamento-diario" title="Planejamento Diário" class="sidebar-link" data-page="planejamento-diario"><i class="fas fa-calendar-alt fa-fw"></i><span class="sidebar-text">Planejamento</span></a></li>
            <li><a href="#tarefas" title="Lista de Tarefas" class="sidebar-link" data-page="tarefas"><i class="fas fa-tasks fa-fw"></i><span class="sidebar-text">Tarefas</span></a></li>
            <li><a href="#reflexoes-diarias" title="Reflexões Diárias" class="sidebar-link" data-page="reflexoes-diarias"><i class="fas fa-pen-fancy fa-fw"></i><span class="sidebar-text">Reflexões</span></a></li>
            <li><a href="#sono" title="Higiene do Sono" class="sidebar-link" data-page="sono"><i class="fas fa-moon fa-fw"></i><span class="sidebar-text">Sono</span></a></li>
        </ul>

        <div class="sidebar-footer">
            <button id="open-contract-sidebar" class="sidebar-link contract-btn" title="Meu Contrato de Autocuidado">
                <i class="fas fa-file-signature fa-fw"></i><span class="sidebar-text">Meu Contrato</span>
            </button>
            <div class="sidebar-version">v1.0.0</div>
        </div>
    </nav>

    <main id="main-content" class="main-content">
        <header class="top-bar">
            <div class="breadcrumb" id="breadcrumb">
                <span class="breadcrumb-item">Pequenos Passos</span>
            </div>
            <div class="top-bar-actions">
                <button id="tts-play-btn" class="icon-button" title="Ouvir conteúdo"><i class="fas fa-play"></i></button>
                <button id="tts-stop-btn" class="icon-button" title="Parar leitura" style="display: none;"><i class="fas fa-stop"></i></button>
            </div>
        </header>

        <div id="page-content-wrapper" class="page-content-wrapper">
            <!-- Content will be dynamically loaded here -->
        </div>
    </main>

    <!-- TTS Settings Modal -->
    <div id="tts-settings-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="tts-settings-title">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="tts-settings-title">Configurações de Leitura</h2>
                <button id="tts-settings-close-btn" class="modal-close-button" aria-label="Fechar Configurações"><i class="fas fa-times"></i></button>
            </header>
            <div class="modal-body">
                <div class="form-group">
                    <label for="tts-voice-select">Voz:</label>
                    <select id="tts-voice-select" class="standard-input"></select>
                </div>
                <div class="form-group">
                    <label for="tts-rate-slider">Velocidade: <span id="tts-rate-value">1.2</span>x</label>
                    <input type="range" id="tts-rate-slider" min="0.5" max="2.0" step="0.1" value="1.2" class="standard-slider">
                </div>
                <div class="form-group">
                    <label for="tts-pitch-slider">Tom: <span id="tts-pitch-value">1.0</span></label>
                    <input type="range" id="tts-pitch-slider" min="0.5" max="2.0" step="0.1" value="1.0" class="standard-slider">
                </div>
            </div>
            <footer class="modal-footer">
                <button id="tts-settings-test-btn" class="standard-button-secondary">Testar Voz</button>
                <button id="tts-start-reading-btn" class="standard-button">Começar Leitura</button>
            </footer>
        </div>
    </div>

    <!-- Contract Modal -->
    <div id="contract-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="contract-title">
        <div class="modal-content large-modal-content">
            <header class="modal-header">
                <h2 id="contract-title">Meu Contrato de Autocuidado</h2>
                <button id="contract-modal-close-btn" class="modal-close-button" aria-label="Fechar Contrato"><i class="fas fa-times"></i></button>
            </header>
            <div class="modal-body">
                <form id="contract-form">
                    <div class="form-group">
                        <label for="contract-name">Eu,</label>
                        <input type="text" id="contract-name" class="standard-input" placeholder="Seu nome completo">
                        <span>comprometo-me solenemente com o meu bem-estar.</span>
                    </div>
                    <div class="form-group">
                        <label for="contract-commitment">Meu Compromisso:</label>
                        <div class="input-with-ai">
                            <textarea id="contract-commitment" class="standard-textarea" placeholder="Descreva seu compromisso principal..."></textarea>
                            <button type="button" id="contract-commitment-ai-btn" class="ai-assist-button" title="Sugestão da IA"><i class="fas fa-magic"></i></button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="contract-goals">Minhas 3 Metas Principais:</label>
                        <div class="input-with-ai">
                            <textarea id="contract-goals" class="standard-textarea" placeholder="1. Meta física...&#10;2. Meta mental...&#10;3. Meta financeira..."></textarea>
                            <button type="button" id="contract-goals-ai-btn" class="ai-assist-button" title="Sugestão da IA"><i class="fas fa-magic"></i></button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="contract-date">Data:</label>
                        <input type="date" id="contract-date" class="standard-input">
                    </div>
                </form>
            </div>
            <footer class="modal-footer">
                <button id="contract-modal-print-btn" class="standard-button-secondary"><i class="fas fa-print"></i> Imprimir</button>
                <button id="contract-modal-cancel-btn" class="standard-button-secondary">Cancelar</button>
                <button id="contract-modal-save-btn" class="standard-button">Salvar Contrato</button>
            </footer>
        </div>
    </div>

    <!-- Asset Edit Modal -->
    <div id="asset-edit-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="asset-edit-title">
        <div class="modal-content">
            <header class="modal-header">
                <h2 id="asset-edit-title">Editar Ativo</h2>
                <button id="asset-edit-close-btn" class="modal-close-button" aria-label="Fechar Edição"><i class="fas fa-times"></i></button>
            </header>
            <div class="modal-body">
                <form id="asset-edit-form">
                    <input type="hidden" id="asset-edit-id">
                    <div class="form-group">
                        <label for="asset-edit-name">Nome do Ativo:</label>
                        <input type="text" id="asset-edit-name" class="standard-input" readonly>
                    </div>
                    <div class="form-group">
                        <label for="asset-edit-value">Valor Atual (R$):</label>
                        <input type="number" id="asset-edit-value" class="standard-input" step="0.01" required>
                    </div>
                </form>
            </div>
            <footer class="modal-footer">
                <button id="asset-edit-cancel-btn" class="standard-button-secondary">Cancelar</button>
                <button id="save-asset-edit-btn" type="submit" form="asset-edit-form" class="standard-button">Salvar Alterações</button>
            </footer>
        </div>
    </div>

    <!-- Image Viewer Modal -->
    <div id="image-viewer-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-label="Visualizador de Imagem">
        <div class="image-viewer-content">
            <button id="image-viewer-close-btn" class="modal-close-button" aria-label="Fechar Imagem"><i class="fas fa-times"></i></button>
            <img id="image-viewer-img" src="" alt="Imagem ampliada">
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="modal-container confirm-modal-container" style="display: none;" role="alertdialog" aria-modal="true" aria-labelledby="confirm-modal-message">
        <div class="modal-content confirm-modal-content">
            <div class="modal-body">
                <p id="confirm-modal-message">Você tem certeza?</p>
            </div>
            <footer class="modal-footer">
                <button id="confirm-modal-no" class="standard-button-secondary">Não</button>
                <button id="confirm-modal-yes" class="standard-button-danger">Sim</button>
            </footer>
        </div>
    </div>

    <!-- AI Insights Modal -->
    <div id="ai-insights-modal" class="modal-container" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="ai-insights-title">
        <div class="modal-content large-modal-content">
            <header class="modal-header">
                <h2 id="ai-insights-title">Insights Gerados por IA</h2>
                <button id="ai-insights-close-btn" class="modal-close-button" aria-label="Fechar Insights"><i class="fas fa-times"></i></button>
            </header>
            <div id="ai-insights-body" class="modal-body">
                <!-- AI content will be injected here -->
            </div>
            <footer class="modal-footer">
                <button id="ai-insights-copy-btn" class="standard-button-secondary"><i class="fas fa-copy"></i> Copiar</button>
                <button id="ai-insights-ok-btn" class="standard-button">Fechar</button>
            </footer>
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toast-notification-container" aria-live="assertive" aria-atomic="true"></div>

    <script type="module" src="src/index.tsx"></script>
</body>
</html>
