import{openModal as f}from"./planejamento-diario-BMKhf7Qq.js";import{s as d,S as m}from"./main-sp5dYjpB.js";import{G as p}from"./goalManager-DkGgNVm4.js";import"./ai-BOEkcp8J.js";const g=[{id:"mental-1",text:"Praticar 5-10 minutos de meditação ou atenção plena (Mindfulness)",completed:!1},{id:"mental-2",text:"Identificar e nomear 3 emoções que senti hoje (Granularidade Emocional)",completed:!1},{id:"mental-3",text:"Aplicar a Dicotomia do Controle a uma preocupação atual",completed:!1},{id:"mental-4",text:"Planejar uma atividade de autocuidado (ex: ler um livro, tomar um banho relaxante)",completed:!1},{id:"mental-5",text:"Organizar as 3 tarefas mais importantes para amanhã para reduzir a carga mental",completed:!1}];let l=null;const s={pageContainer:null,reflectionForm:null},h=e=>{const r=e.target.closest('.add-to-plan-btn, [data-page="planejamento-diario"]');if(!r)return;if(r.dataset.page==="planejamento-diario"){window.location.hash="planejamento-diario";return}const t=r.closest(".routine-block");if(!t)return;const a=t.dataset.description,n=t.dataset.category;a&&n&&f(void 0,{description:a,category:n})};function v(e){const o=e.querySelectorAll(".content-section[id]"),r=e.querySelectorAll(".pdca-nav-btn");if(o.length===0||r.length===0)return;const t=new IntersectionObserver(a=>{a.forEach(n=>{if(n.isIntersecting){const c=n.target.getAttribute("id");r.forEach(i=>{i.classList.toggle("active",i.getAttribute("href")===`#${c}`)})}})},{rootMargin:"-40% 0px -60% 0px",threshold:0});o.forEach(a=>t.observe(a))}function E(){s.reflectionForm&&s.reflectionForm.addEventListener("submit",e=>{e.preventDefault();const o=s.reflectionForm.querySelectorAll(".reflection-input"),r=s.reflectionForm.dataset.category;let t=0;const a=d.get(m.UNIFIED_REFLECTIONS)||[];o.forEach(n=>{const c=n.value.trim();if(c){const i=new Date,u={id:`${i.getTime()}-${Math.random()}`,category:r,title:n.dataset.title||"Reflexão",text:c,date:i.toISOString().split("T")[0],timestamp:i.getTime()};a.push(u),n.value="",t++}}),t>0?(d.set(m.UNIFIED_REFLECTIONS,a),window.showToast(`${t} reflex${t>1?"ões salvas":"ão salva"} com sucesso!`,"success")):window.showToast("Nenhuma reflexão preenchida para salvar.","info")})}function A(){const e=document.getElementById("page-mental");if(!e)return;s.pageContainer=e,s.reflectionForm=e.querySelector(".reflection-form");const o=e.querySelector(".content-section");o==null||o.addEventListener("click",h),l=new p("page-mental",m.MENTAL_GOALS,"mental-metas-list","mental-metas-form","mental-meta-input",g,"Mental"),l.setup(),E(),v(e)}function F(){l==null||l.show()}export{A as setup,F as show};
