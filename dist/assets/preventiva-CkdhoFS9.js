import{s as u,S as m}from"./index-2-HCTc4e.js";let x=[],h={},c=null,f=null;const b={tetano:{name:"Tétano e Difteria (dT/dTpa)",scheduleType:"booster",validityYears:10,pendingMonths:3,details:"Reforço a cada 10 anos."},"hepatite-b":{name:"Hepatite B",scheduleType:"series",details:"Esquema de 3 doses. Verifique seu status."},influenza:{name:"Influenza (Gripe)",scheduleType:"annual",pendingMonths:2,details:"Dose anual, antes do inverno."},"triplice-viral":{name:"Tríplice Viral (SCR)",scheduleType:"series",details:"Duas doses na vida para nascidos após 1960."},"febre-amarela":{name:"Febre Amarela",scheduleType:"single",details:"Dose única para a maioria."},hpv:{name:"HPV",scheduleType:"series",details:"Esquema de 2 ou 3 doses. Verifique seu status."},pneumococica:{name:"Pneumocócica",scheduleType:"check",details:"Recomendada para 60+ ou com risco. Consulte médico."},meningococica:{name:"Meningocócica",scheduleType:"check",details:"Recomendada para adolescentes e jovens adultos. Consulte médico."},varicela:{name:"Varicela (Catapora)",scheduleType:"series",details:"Esquema de 2 doses se não teve a doença."},"hepatite-a":{name:"Hepatite A",scheduleType:"series",details:"Esquema de 2 doses."},"herpes-zoster":{name:"Herpes Zóster",scheduleType:"check",details:"Recomendada para 50+. Consulte médico."},"covid-19":{name:"COVID-19",scheduleType:"annual",pendingMonths:2,details:"Reforços podem ser recomendados."},dengue:{name:"Dengue",scheduleType:"series",details:"Para áreas endêmicas. Consulte médico."}},y=(t,e)=>{const n={glicemia:{name:"Glicemia em Jejum",unit:"mg/dL",min:50,max:150,zones:[{to:69,status:"Atenção",tip:"Possível hipoglicemia."},{to:99,status:"Normal",tip:"Valor ótimo."},{to:125,status:"Atenção",tip:"Risco de pré-diabetes."},{to:150,status:"Alerta",tip:"Sugestivo de diabetes."}]},hdl:{name:"HDL",unit:"mg/dL",min:20,max:100,reversed:!0,zones:[{to:(e==null?void 0:e.sex)==="male"?39:49,status:"Alerta",tip:"Nível baixo."},{to:59,status:"Normal",tip:"Nível aceitável."},{to:100,status:"Ótimo",tip:"Nível protetor."}]},ldl:{name:"LDL",unit:"mg/dL",min:50,max:200,zones:[{to:99,status:"Ótimo",tip:"Ideal."},{to:129,status:"Normal",tip:"Próximo ao ótimo."},{to:159,status:"Atenção",tip:"Limítrofe."},{to:200,status:"Alerta",tip:"Nível alto."}]},colesterol:{name:"Colesterol Total",unit:"mg/dL",min:100,max:300,zones:[{to:199,status:"Ótimo",tip:"Desejável."},{to:239,status:"Atenção",tip:"Limítrofe."},{to:300,status:"Alerta",tip:"Alto."}]},triglicerideos:{name:"Triglicerídeos",unit:"mg/dL",min:50,max:500,zones:[{to:149,status:"Ótimo",tip:"Desejável."},{to:199,status:"Atenção",tip:"Limítrofe."},{to:499,status:"Alerta",tip:"Alto."},{to:500,status:"Alerta",tip:"Muito alto."}]},vitd:{name:"Vitamina D",unit:"ng/mL",min:10,max:100,zones:[{to:19,status:"Alerta",tip:"Deficiência."},{to:29,status:"Atenção",tip:"Insuficiência."},{to:60,status:"Ótimo",tip:"Adequado."},{to:100,status:"Atenção",tip:"Elevado."}]},tsh:{name:"TSH",unit:"µUI/mL",min:.1,max:10,zones:[{to:.39,status:"Atenção",tip:"Sugestivo de hipertireoidismo."},{to:4,status:"Normal",tip:"Normal."},{to:10,status:"Atenção",tip:"Sugestivo de hipotireoidismo."}]},creatinina:{name:"Creatinina",unit:"mg/dL",min:.4,max:1.5,zones:[{to:.59,status:"Atenção",tip:"Baixo."},{to:1.2,status:"Normal",tip:"Normal."},{to:1.5,status:"Atenção",tip:"Elevado."}]},acidourico:{name:"Ácido Úrico",unit:"mg/dL",min:2,max:10,zones:[{to:2.4,status:"Atenção",tip:"Baixo."},{to:6,status:"Normal",tip:"Normal."},{to:10,status:"Alerta",tip:"Elevado."}]},pcr:{name:"PCR Ultrassensível",unit:"mg/L",min:0,max:10,zones:[{to:.9,status:"Normal",tip:"Baixo risco."},{to:2.9,status:"Atenção",tip:"Risco médio."},{to:10,status:"Alerta",tip:"Alto risco."}]},ferritina:{name:"Ferritina",unit:"ng/mL",min:10,max:400,zones:[{to:49,status:"Atenção",tip:"Baixo."},{to:150,status:"Normal",tip:"Adequado."},{to:400,status:"Atenção",tip:"Elevado."}]},b12:{name:"Vitamina B12",unit:"pg/mL",min:100,max:1e3,zones:[{to:399,status:"Atenção",tip:"Baixo."},{to:900,status:"Normal",tip:"Adequado."},{to:1e3,status:"Atenção",tip:"Elevado."}]},gordura_bio:{name:"Gordura Corporal",unit:"%",min:5,max:50,zones:[{to:(e==null?void 0:e.sex)==="male"?14:21,status:"Ótimo",tip:"Atleta."},{to:(e==null?void 0:e.sex)==="male"?20:28,status:"Normal",tip:"Saudável."},{to:(e==null?void 0:e.sex)==="male"?25:33,status:"Atenção",tip:"Acima do ideal."},{to:50,status:"Alerta",tip:"Obesidade."}]},massamagra_bio:{name:"Massa Magra",unit:"kg",min:30,max:90,reversed:!0,zones:[{to:49,status:"Alerta",tip:"Baixa."},{to:80,status:"Normal",tip:"Adequado."},{to:90,status:"Ótimo",tip:"Excelente."}]}};return t?n[t]:n};function T(){const t=Object.keys(b).length;let e=0;Object.keys(b).forEach(g=>{const l=document.querySelector(`tr[data-vaccine-id="${g}"] .vaccine-status`);l!=null&&l.classList.contains("status-ok")&&e++});const n=Object.keys(y("",null)).length;let s=0;Object.keys(y("",null)).forEach(g=>{const l=u.get(`${m.PREVENTIVA_INDICATOR_PREFIX}${g}`)||[];if(l.length>0){const A=new Date(l[l.length-1].date),v=new Date;v.setFullYear(v.getFullYear()-1),A>v&&s++}});const a=document.querySelectorAll('#preventivaDiagnosticos .risk-item[data-diagnostic-id^="exame-"], #preventivaDiagnosticos .risk-item[data-diagnostic-id^="mamografia"], #preventivaDiagnosticos .risk-item[data-diagnostic-id^="papanicolau"], #preventivaDiagnosticos .risk-item[data-diagnostic-id^="colonoscopia"], #preventivaDiagnosticos .risk-item[data-diagnostic-id^="dermatologico"], #preventivaDiagnosticos .risk-item[data-diagnostic-id^="oftalmologico"], #preventivaDiagnosticos .risk-item[data-diagnostic-id^="odontologico"], #preventivaDiagnosticos .risk-item[data-diagnostic-id^="densitometria"]'),o=a.length;let i=0;a.forEach(g=>{const l=g.dataset.diagnosticId;if(l&&h[l]&&h[l].enabled&&h[l].date){const A=new Date(h[l].date),v=new Date;v.setFullYear(v.getFullYear()-1),A>v&&i++}});const d=t+n+o,r=e+s+i,E=d>0?Math.round(r/d*100):0;document.querySelector("#vaccines-status-count").textContent=`${e}/${t}`,document.querySelector("#biomarkers-status-count").textContent=`${s}/${n}`,document.querySelector("#screenings-status-count").textContent=`${i}/${o}`;const p=document.querySelector("#preventiva-progress-ring .circle"),I=document.querySelector("#preventiva-progress-ring .percentage");p.style.strokeDasharray=`${E}, 100`,I.textContent=`${E}%`}function D(t){var E;const e=document.querySelector(`.indicator-card[data-indicator-id="${t}"]`);if(!e)return;const n=y(t,c);if(!n)return;const s=u.get(`${m.PREVENTIVA_INDICATOR_PREFIX}${t}`)||[],a=s.length>0?s[s.length-1]:{value:null,date:""};e.querySelector(".indicator-value").value=((E=a.value)==null?void 0:E.toString())??"",e.querySelector(".indicator-date").value=a.date||"";const o=e.querySelector(".interpretation"),i=e.querySelector(".suggestion"),d=e.querySelector(".marker"),r=e.querySelector(".overdue-warning");if(a.value!==null&&!isNaN(a.value)){const p=n.zones.find(g=>a.value<=g.to)||n.zones[n.zones.length-1];o.textContent=p.status,i.textContent=p.tip,o.className=`interpretation status-${p.status.toLowerCase().replace(/ /g,"-")}`;const I=Math.max(0,Math.min(100,(a.value-n.min)/(n.max-n.min)*100));d.style.left=`${I}%`}else o.textContent="N/A",i.textContent="Insira um valor.",d.style.left="-100%";if(a.date){const p=new Date;p.setFullYear(p.getFullYear()-1),r.style.display=new Date(a.date)<p?"block":"none"}else r.style.display="none"}function S(t){const e=document.querySelector(`.indicator-card[data-indicator-id="${t}"]`);if(!e)return;const n=e.querySelector(".indicator-value"),s=e.querySelector(".indicator-date");if(!n.value||!s.value){window.showToast("Por favor, insira o valor e a data.","warning");return}const a={value:parseFloat(n.value),date:s.value};let o=u.get(`${m.PREVENTIVA_INDICATOR_PREFIX}${t}`)||[];o.push(a),o.sort((i,d)=>new Date(i.date).getTime()-new Date(d.date).getTime()),u.set(`${m.PREVENTIVA_INDICATOR_PREFIX}${t}`,o),window.showToast(`${y(t,c).name} atualizado!`,"success"),D(t),T()}function k(t){const e=document.getElementById("biomarker-history-modal"),n=document.getElementById("biomarker-history-title"),s=document.getElementById("biomarker-chart-container"),a=document.getElementById("biomarker-no-history"),o=y(t,c);n.textContent=`Histórico de ${o.name}`;const i=u.get(`${m.PREVENTIVA_INDICATOR_PREFIX}${t}`)||[];if(i.length<2)s.style.display="none",a.style.display="block";else{s.style.display="block",a.style.display="none",f&&f.destroy();const d=document.getElementById("biomarker-history-chart").getContext("2d");f=new window.Chart(d,{type:"line",data:{labels:i.map(r=>new Date(r.date+"T00:00:00").toLocaleDateString("pt-BR")),datasets:[{label:o.name,data:i.map(r=>r.value),borderColor:"var(--color-preventiva)",backgroundColor:"rgba(var(--color-preventiva-rgb), 0.1)",fill:!0,tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1}})}e.style.display="flex"}function C(t){var s,a;document.getElementById("page-preventiva").querySelectorAll(".preventiva-page").forEach(o=>o.classList.remove("active")),(s=document.getElementById(t))==null||s.classList.add("active"),document.getElementById("preventivaBackButton").style.display="block";const n=((a=document.querySelector(`#${t} .section-title`))==null?void 0:a.textContent)||"Saúde Preventiva";document.getElementById("preventivaMainTitle").textContent=n}function B(){var e;document.getElementById("page-preventiva").querySelectorAll(".preventiva-page").forEach(n=>n.classList.remove("active")),(e=document.getElementById("preventivaMainMenu"))==null||e.classList.add("active"),document.getElementById("preventivaBackButton").style.display="none",document.getElementById("preventivaMainTitle").textContent="Saúde Preventiva",T()}function R(){var s;const t=document.getElementById("page-preventiva");if(!t)return;t.addEventListener("click",async a=>{const o=a.target,i=o.closest(".menu-item");i!=null&&i.dataset.target&&(a.preventDefault(),C(i.dataset.target)),o.closest("#preventivaBackButton")&&B()}),t.addEventListener("click",a=>{const o=a.target;if(o.closest(".update-button")){const r=o.closest(".indicator-card");r!=null&&r.dataset.indicatorId&&S(r.dataset.indicatorId)}if(o.closest(".history-btn")){const r=o.closest(".indicator-card");r!=null&&r.dataset.indicatorId&&k(r.dataset.indicatorId)}}),(s=document.getElementById("biomarker-history-close-btn"))==null||s.addEventListener("click",()=>{document.getElementById("biomarker-history-modal").style.display="none"});const e=document.getElementById("user-profile-form");e==null||e.addEventListener("submit",a=>{a.preventDefault(),c={birthDate:document.getElementById("user-birthdate").value,sex:document.getElementById("user-sex").value},u.set(m.PREVENTIVA_PROFILE,c),window.showToast("Perfil salvo!","success"),Object.keys(y("",null)).forEach(D)});const n=document.getElementById("add-supplement-form");n==null||n.addEventListener("submit",a=>{a.preventDefault();const o={id:Date.now().toString(),name:document.getElementById("supplement-name").value,dosage:document.getElementById("supplement-dosage").value,frequency:document.getElementById("supplement-frequency").value,time:document.getElementById("supplement-time").value,notes:document.getElementById("supplement-notes").value};x.push(o),u.set(m.PREVENTIVA_SUPPLEMENTS,x),n.reset()})}function q(){c=u.get(m.PREVENTIVA_PROFILE)||null,c&&(document.getElementById("user-birthdate").value=c.birthDate,document.getElementById("user-sex").value=c.sex),h=u.get(m.PREVENTIVA_DIAGNOSTICS)||{},document.querySelectorAll(".risk-item[data-gender-specific]").forEach(t=>{const e=t.dataset.genderSpecific;t.style.display=!c||c.sex===e?"":"none"}),B(),Object.keys(b).forEach(t=>{}),Object.keys(y("",null)).forEach(D),x=u.get(m.PREVENTIVA_SUPPLEMENTS)||[]}export{R as setup,q as show};
