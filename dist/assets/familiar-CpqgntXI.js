import{openModal as u}from"./planejamento-diario-GX6Pjrzf.js";import{s as f,S as c}from"./index-2-HCTc4e.js";import{G as p}from"./goalManager-C8P1f7jB.js";import"./ai-BOEkcp8J.js";let n=null;const g=[{id:"familiar-1",text:"Praticar escuta ativa em uma conversa com um familiar",completed:!1},{id:"familiar-2",text:'Agendar um "tempo de qualidade" sem distrações (ex: noite de jogos, caminhada)',completed:!1},{id:"familiar-3",text:"Expressar apreciação a um membro da família (antídoto para crítica)",completed:!1},{id:"familiar-4",text:'Identificar e praticar uma das 5 "Linguagens do Amor" com um ente querido',completed:!1}],i={pageContainer:null,reflectionForm:null},v=e=>{const s=e.target.closest(".add-to-plan-btn");if(!s)return;const t=s.closest(".routine-block");if(!t)return;const r=t.dataset.description,o=t.dataset.category;r&&o&&u(void 0,{description:r,category:o})};function E(){i.reflectionForm&&i.reflectionForm.addEventListener("submit",e=>{e.preventDefault();const a=i.reflectionForm.querySelectorAll(".reflection-input"),s=i.reflectionForm.dataset.category;let t=0;const r=f.get(c.UNIFIED_REFLECTIONS)||[];a.forEach(o=>{const m=o.value.trim();if(m){const l=new Date,d={id:`${l.getTime()}-${Math.random()}`,category:s,title:o.dataset.title||"Reflexão",text:m,date:l.toISOString().split("T")[0],timestamp:l.getTime()};r.push(d),o.value="",t++}}),t>0?(f.set(c.UNIFIED_REFLECTIONS,r),window.showToast(`${t} reflex${t>1?"ões salvas":"ão salva"} com sucesso!`,"success")):window.showToast("Nenhuma reflexão preenchida para salvar.","info")})}function I(){const e=document.getElementById("page-familiar");if(!e)return;i.pageContainer=e,i.reflectionForm=e.querySelector(".reflection-form");const a=e.querySelector(".content-section");a==null||a.addEventListener("click",v),n=new p("page-familiar",c.FAMILIAR_GOALS,"familiar-metas-list","familiar-metas-form","familiar-meta-input",g,"Familiar"),n.setup(),E()}function x(){n==null||n.show()}export{I as setup,x as show};
